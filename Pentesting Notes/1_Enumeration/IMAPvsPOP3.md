
### IMAP

Protocolo que permite gestionar correos en el servidor. Soporta carpetas, multiples buzones...
Los correos se quedan en el servidor hasta que se borra.

Usa una arquitectura cliente-servidor

Puerto **143** --> sin cifrar
Puerto **993** --> con cifrado SSL/TLS

### POP3

Funciones mas basicas que IMAP como listar, descargar y borrar. 

Puerto **110** --> sin cifrar
Puerto **995** --> con cifrado SSL/TLS

### Comandos basicos

#### IMAP

- `LOGIN user pass` → login  
- `LIST "" *` → listar carpetas   
- `SELECT INBOX` → abrir buzón   
- `FETCH <ID> all` → leer correo   
- `LOGOUT` → salir   

#### POP3

- `USER / PASS` → autenticación 
- `STAT` → número de correos    
- `LIST` → listar correos 
- `RETR id` → descargar correo   
- `DELE id` → borrar correo    
- `QUIT` → salir


### Acceso al correo

#### IMAP

Se puede listar buzones con *curl*:

```
curl -k 'imaps://{IP}' --user user:password -v
```

Si es IMAP puerto 143 sin cifrar se pone imap.
Si es IMAP puerto 993 cifrado se pone imaps.

- -k porque nos da igual si el certificado es autofirmado
-  -v para añadir mas informacion (verbose)

El curl devuelve:

```
* LIST (\HasNoChildren) "." Important
* LIST (\HasNoChildren) "." INBOX
```


### OpenSSL con IMAP y POP3

```
openssl s_client -connect {IP}:pop3s
```

```
openssl s_client -connect {IP}:imaps
```

